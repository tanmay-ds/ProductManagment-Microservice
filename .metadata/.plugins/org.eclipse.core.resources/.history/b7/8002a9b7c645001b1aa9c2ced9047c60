package com.productmanagment.userinfo.config.changlog;

import java.util.Collections;

import org.springframework.transaction.annotation.Transactional;

import com.productmanagment.userinfo.entity.RoleInfo;
import com.productmanagment.userinfo.entity.UserInfo;
import com.productmanagment.userinfo.repo.UserInfoRepository;

import io.changock.migration.api.annotations.ChangeLog;
import io.changock.migration.api.annotations.ChangeSet;

@ChangeLog
public class UserDatabaseChangelog {
	@Transactional
	@ChangeSet(order = "001", id = "defaultUser", author = "system")
	public void addDefaultUser(UserInfoRepository userInfoRepository) {
		UserInfo user = new UserInfo();
		user.setUuid(1L);
		user.setFirstName("mQ2hPvNqrShPOmLRtiqvlw==");
		user.setLastName("rvlMgXTLgUmnuXZvPi8ZdA==");
		user.setEmail("VI6egjwQVaxYbUodL+MeOg==");
		user.setAddress("AbyxqyVpHjhYB4WwbCtcCA==");
		user.setPassword("$2a$10$a9hMAms0VN.kJ5lVvKQ6NOv8ylLaKvm66l/TyyXsV.hZjGDgpFjqO");
		user.setPhoneNumber("pe0P5BZvxnA3AlcklHlpjA==");
		user.setRoles(Collections.singletonList(new RoleInfo("cqKl2KMqYlESk2M6wUoUdQ==")));

		userInfoRepository.save(user);
	}
}
